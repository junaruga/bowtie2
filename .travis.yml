dist: trusty
sudo: true
git:
  depth: 1
language: generic
matrix:
  include:
  # https://docs.travis-ci.com/user/languages/cpp/
  - language: c++
    compiler: clang
  - language: c++
    compiler: gcc
  # How to use gcc-5, gcc-6, gcc-7
  # https://docs.travis-ci.com/user/languages/c/
  - language: c++
    compiler: gcc-5
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - g++-5
    env:
    - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"
  - language: c++
    compiler: gcc-7
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - g++-7
    env:
    - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"
  # https://docs.travis-ci.com/user/languages/perl/
  # - language: perl
  #   perl: "5.26"
  # https://docs.travis-ci.com/user/languages/python/
  #- language: python
  #  python: "3.6"
  #- language: python
  #  python: "pypy3.5"
  - os: osx
    osx_image: xcode8
    language: c++
    env:
    - MATRIX_EVAL="brew install gcc && CC=gcc-7 && CXX=g++-7"
cache: apt
addons:
  apt:
    packages:
    - libtbb-dev
#branches:
#  only:
#  - master
#  - cleaner_parsing
#  - scaling-old-parsing
#  - batch_parsing
#  - batch_parsing_output
#  - blocked_input
#  - bug_fixes
install: eval "${MATRIX_EVAL}"
script: make allall && make simple-test
# notifications:
#   slack:
#     secure: tfzT8N1fNV+oSV7tide9WrAj3ifs+LONJ3fCH1tUzexqrx23te4lE0oAj9C1cEMJ4evyRYwHNG8HZoLCOy8EfapqbWm6vgLIlkIBpeZ9E6f2jG6v0YuVDWWpqQC3qdGXCqWtHPjgs3i5OLsLwwQ/LItLoTqpBk2aYv+vGNs2F9g=
