sudo: required
language: generic
matrix:
  include:
  - language: c++
    compiler: clang
  - language: c++
    compiler: gcc
  - env: CC=gcc-8 CXX=g++-8 CXXFLAGS="-fuse-ld=gold"
  fast_finish: true
  allow_failures:
  - env: CC=gcc-8 CXX=g++-8 CXXFLAGS="-fuse-ld=gold"
cache: apt
addons:
  apt:
    packages:
    - libtbb-dev
# branches:
#   only:
#   - master
#   - cleaner_parsing
#   - scaling-old-parsing
#   - batch_parsing
#   - batch_parsing_output
#   - blocked_input
#   - bug_fixes
before_install:
- sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
- sudo apt-get update -qq
- |
  if [[ "${CC}" =~ ^gcc- ]]; then
    echo "Installing ${CC}."
    sudo apt-get install -qq "${CC}"
  fi
- |
  if [[ "${CXX}" =~ ^g\+\+- ]]; then
    echo "Installing ${CXX}."
    sudo apt-get install -qq "${CXX}"
  fi
script: make allall && make simple-test
notifications:
  slack:
    secure: tfzT8N1fNV+oSV7tide9WrAj3ifs+LONJ3fCH1tUzexqrx23te4lE0oAj9C1cEMJ4evyRYwHNG8HZoLCOy8EfapqbWm6vgLIlkIBpeZ9E6f2jG6v0YuVDWWpqQC3qdGXCqWtHPjgs3i5OLsLwwQ/LItLoTqpBk2aYv+vGNs2F9g=
